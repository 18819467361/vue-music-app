webpackJsonp([1],{"0IpB":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("Dd8w"),n=i.n(s),r=i("Sgn/"),a=i("T452"),c={data:function(){return{singersIndex:a.c.area,areaId:2}},methods:{getArea:function(t){this.areaId=t.id,this.$emit("change-area",t.id)}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"top-nav-wrapper"},[i("ul",{staticClass:"top-nav"},t._l(t.singersIndex,function(e,s){return i("li",{key:s,class:["top-nav-list",{active:e.id===t.areaId}],on:{click:function(i){t.getArea(e)}}},[t._v(t._s(e.name))])}))])},staticRenderFns:[]};var l=i("VU/8")(c,o,!1,function(t){i("ofWx")},"data-v-d848ddb0",null).exports,h=i("qwAB"),u=i("KY9l"),d=i("y/jF"),f={mixins:[i("F4+m").b],created:function(){this.touch={},this.listenScroll=!0,this.listHeight=[],this.probeType=3},data:function(){return{singersIndex:a.c.index,indexId:-100,scrollY:-1,currentIndex:0,diff:""}},props:{data:{type:Array,defalut:[]}},computed:{fixedTitle:function(){return this.scrollY>0?"":this.data[this.currentIndex]?this.data[this.currentIndex].name:""},fixedData:function(){if(!this.data)return!1;for(var t=0;t<this.data.length;t++)if(void 0===this.data[t])return!1;return this.data}},components:{Scroll:h.a,Loading:d.a},watch:{render:function(t){console.log(t,"render")},fixedData:function(){var t=this;setTimeout(function(){t._calculateHeight()},20)},scrollY:function(t){var e=this.listHeight;if(t>0)this.currentIndex=0;else{for(var i=0;i<e.length-1;i++){var s=e[i],n=e[i+1];if(-t>=s&&-t<n)return this.currentIndex=i,void(this.diff=n+t)}this.currentIndex=e.length-2}},diff:function(t){var e=t>0&&t<24?t-24:0;this.fixedTop!==e&&(this.fixedTop=e,this.$refs.fixed.style.transform="translate3d(0,"+e+"px,0)")}},methods:{handlePlaylist:function(t){var e=this;this.$nextTick(function(){var i=t.length>0?60:"";e.$refs.fixHeight&&(e.$refs.fixHeight.style.height=i+"px",e.$refs.listView.refresh())})},getIndex:function(t){this.indexId=t.id},onShortcutTouchStart:function(t){var e=Object(u.a)(t.target,"index"),i=t.touches[0];this.touch.y1=i.pageY,this.touch.anchorIndex=e,this._scrollTo(e)},onShortcutTouchMove:function(t){var e=t.touches[0];this.touch.y2=e.pageY;var i=(this.touch.y2-this.touch.y1)/14|0,s=parseInt(this.touch.anchorIndex)+i;this._scrollTo(s)},_scrollTo:function(t){(t||0===t)&&(this.scrollY=-this.listHeight[t],this.$refs.listView.scrollToElement(this.$refs.listGroup[t],0))},scroll:function(t){this.scrollY=t.y},_calculateHeight:function(){this.listHeight=[];var t=this.$refs.listGroup,e=0;this.listHeight.push(e);for(var i=0;i<t.length;i++){e+=t[i].scrollHeight,this.listHeight.push(e)}},selectItem:function(t){this.$emit("select",t)}}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.fixedData?i("div",{staticClass:"contain"},[i("scroll",{ref:"listView",staticClass:"singer-list-wrapper",attrs:{data:t.data,listenScroll:t.listenScroll,probeType:t.probeType},on:{scroll:t.scroll}},[i("ul",{staticClass:"list-content"},[t._l(t.fixedData,function(e,s){return i("li",{key:s,ref:"listGroup",refInFor:!0},[i("h2",{staticClass:"list-title"},[t._v(t._s(e.name))]),t._v(" "),i("ul",t._l(e.data,function(e,n){return i("li",{key:n,on:{click:function(i){t.selectItem(e)}}},[i("div",{staticClass:"singer-list"},[0===s?i("div",{staticClass:"img-wrapper"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.singer_pic,expression:"item.singer_pic"}],staticClass:"singer-img"})]):t._e(),t._v(" "),i("h3",{class:[{"singer-name":0===s},{small:0!==s}]},[t._v(t._s(e.singer_name))])])])}))])}),t._v(" "),i("li",{ref:"fixHeight"})],2),t._v(" "),i("div",{staticClass:"list-fixed"}),t._v(" "),i("h1",{directives:[{name:"show",rawName:"v-show",value:t.fixedTitle,expression:"fixedTitle"}],ref:"fixed",staticClass:"fixed-title"},[t._v(t._s(t.fixedTitle))])]),t._v(" "),i("div",{staticClass:"side-nav-wrapper"},[i("ul",{staticClass:"side-nav"},t._l(t.singersIndex,function(e,s){return i("li",{key:s,class:["side-nav-bar",{"active-side-list":s===t.currentIndex}],attrs:{"data-index":s},on:{touchstart:t.onShortcutTouchStart,touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.onShortcutTouchMove(e)},click:function(i){t.getIndex(e)}}},[t._v(t._s(e.name.substring(0,1)))])}))]),t._v(" "),t.data.length?t._e():i("div",{staticClass:"loading-container"},[i("loading",{attrs:{title:"正在载入..."}})],1)],1):t._e()},staticRenderFns:[]};var v=i("VU/8")(f,g,!1,function(t){i("rI1t")},null,null).exports,p=i("7+uW"),x=i("NYxO"),_={data:function(){return{singers:[],areaId:-100,index:a.c.index}},components:{TopNav:l,ViewList:v},computed:{singersFull:function(){if(28===this.singers.length)return this.singers}},created:function(){this._fetchSingerList(this.setSingers,this.index)},methods:n()({_fetchSingerList:function(t,e){for(var i=0;i<e.length;i++)Object(r.b)(this.areaId,e[i],i,t)},setSingers:function(t,e,i){t.code===a.a&&(t.singerList.data.singerlist.splice(20),p.a.set(this.singers,i,{name:"",data:""}),this.singers[i].name=e,this.singers[i].data=t.singerList.data.singerlist)},resetArea:function(t){this.areaId=t},resetIndex:function(t){this.index=t},selectSinger:function(t){this.setSinger(t),this.$router.push({path:"/singer/"+t.singer_id})}},Object(x.d)({setSinger:"SET_SINGER"})),watch:{areaId:function(){this._fetchSingerList(this.setSingers,this.index)}}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"singers-wrapper"},[e("top-nav",{on:{"change-area":this.resetArea}}),this._v(" "),e("view-list",{attrs:{data:this.singersFull},on:{select:this.selectSinger}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var I=i("VU/8")(_,m,!1,function(t){i("NFEI")},"data-v-3cb3ffaa",null);e.default=I.exports},NFEI:function(t,e){},"Sgn/":function(t,e,i){"use strict";e.b=function(t,e,i,s){var c=n()({},a.b,{g_tk:5381,loginUin:0,hostUin:0,format:"jsonp",platform:"yqq",data:encodeURIComponent('{"comm":{"ct":24,"cv":10000},"singerList":{"module":"Music.SingerListServer","method":"get_singer_list","param":{"area":'+t+',"sex":-100,"genre":-100,"index":'+e.id+',"sin":0,"cur_page":1}}}')});return r.a.fetchData2("https://u.y.qq.com/cgi-bin/musicu.fcg",c,e.name,i,s)},e.a=function(t,e){var i=n()({},a.b,{g_tk:1215922553,loginUin:"251961612",inCharset:"utf8",hostUin:"0",format:"jsonp",platform:"yqq",needNewCode:"0",singermid:t,order:"listen",begin:"0",num:"30",songstatus:1});return r.a.fetchData1("https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg",i,e)};var s=i("woOf"),n=i.n(s),r=i("nSkA"),a=i("T452")},ofWx:function(t,e){},rI1t:function(t,e){}});
//# sourceMappingURL=1.8b346e1f76de9886ed87.js.map